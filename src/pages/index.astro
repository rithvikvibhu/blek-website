---
import Layout from '../components/Layout.astro';
import ProjectCard from '../components/ProjectCard.astro';
import { getCollection } from 'astro:content';

const allProjects = await getCollection('projects');
const featuredProjects = allProjects
  .filter(p => p.data.featured === true)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<Layout title="Rithvik Vibhu | Network Systems Engineer">
  <section class="py-12 md:py-20">
    <div class="space-y-6 max-w-3xl mx-auto">
      <h1 class="text-4xl md:text-5xl font-bold text-slate-900 dark:text-white leading-tight text-balance">
        Hi, I'm Rithvik
      </h1>

      <div class="text-lg text-slate-600 dark:text-slate-300 space-y-4 leading-relaxed text-balance">
        <p>
          I like building things that talk to other things.
        </p>
      </div>

      <div class="pt-8 flex flex-col sm:flex-row gap-4 justify-center">
        <a href="/about" class="inline-flex items-center justify-center px-6 py-3 border border-slate-200 dark:border-slate-700 text-base font-medium rounded-xl text-slate-700 dark:text-slate-200 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 transition-all shadow-sm hover:shadow hover:-translate-y-0.5">
          More About Me
        </a>
        <a href="/projects" class="inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-xl text-slate-900 bg-primary hover:brightness-110 transition-all shadow-sm hover:shadow hover:-translate-y-0.5">
          Things I've Built
        </a>
      </div>
    </div>
  </section>

  <section class="py-12 border-t border-slate-200 dark:border-slate-800">
    <div class="flex items-center justify-between mb-8">
      <h2 class="text-2xl font-bold text-slate-900 dark:text-white">A few of the things...</h2>
      <a href="/projects" class="text-primary font-medium hover:underline">View all &rarr;</a>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      {featuredProjects.length > 0 ? (
        featuredProjects.map(project => (
          <ProjectCard project={project} />
        ))
      ) : (
        <p class="text-slate-500 col-span-2">Projects coming soon...</p>
      )}
    </div>
  </section>
</Layout>
